<!DOCTYPE html>

<html>
<head>
  <title>node.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>

      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">


                <a class="source" href="consumer.html">
                  consumer.js
                </a>


                <a class="source" href="counter.html">
                  counter.js
                </a>


                <a class="source" href="deferred.html">
                  deferred.js
                </a>


                <a class="source" href="heft.html">
                  heft.js
                </a>


                <a class="source" href="identifier.html">
                  identifier.js
                </a>


                <a class="source" href="indexer.html">
                  indexer.js
                </a>


                <a class="source" href="node.html">
                  node.js
                </a>


                <a class="source" href="procession.html">
                  procession.js
                </a>


                <a class="source" href="throttle.html">
                  throttle.js
                </a>

            </div>
          </div>
        </li>
      </ul>

    <ul class="sections">

          <li id="title">
              <div class="annotation">
                  <h1>node.js</h1>
              </div>
          </li>



        <li id="section-1">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>The node for the underlying linked list. You, dear user, are welcome to
iterate the linked list implemented by this node class and create new
shifters from it.</p>
<p>This is useful when you’re treating the queue as a log and holding on a
shifter at an earlier position in the queue so you can replay the log from a
certain checkpoint. Thus, when you want to replay the log, you can start from
your checkpoint shifter, grab its node and iterate forward to just before the
node to begin replaying and create a new shifter.</p>
<hr>

            </div>

        </li>


        <li id="section-2">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Requirements.</p>
<hr>

            </div>

        </li>


        <li id="section-3">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>)
<span class="hljs-keyword">var</span> Consumer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./consumer'</span>)

</pre></div></div>

        </li>


        <li id="section-4">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Construct a node for the given Procession.</p>
<p>The <code>module</code> property is a convention I follow for creating objects tha
envelop other objects. We’re using the word <code>body</code> instead of <code>value</code> for the
node value becasue I consider this an envelope.</p>
<hr>

            </div>

        </li>


        <li id="section-5">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Node</span> (<span class="hljs-params">procession, type, id, body, next</span>) </span>{
    <span class="hljs-keyword">this</span>.module = <span class="hljs-string">'procession'</span>
    <span class="hljs-keyword">this</span>._procession = procession
    <span class="hljs-keyword">this</span>.type = type
    <span class="hljs-keyword">this</span>.id = id
    <span class="hljs-keyword">this</span>.next = nex
    <span class="hljs-keyword">this</span>.body = body
}

</pre></div></div>

        </li>


        <li id="section-6">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Peek at the value of the next node if there is a next node.</p>
<hr>

            </div>

        </li>


        <li id="section-7">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>Node.prototype.peek = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.next &amp;&amp; <span class="hljs-keyword">this</span>.next.body
}

</pre></div></div>

        </li>


        <li id="section-8">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Create a new shifter whose next shifted value is the value of the next node.</p>
<hr>

            </div>

        </li>


        <li id="section-9">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>

            </div>

            <div class="content"><div class='highlight'><pre>Node.prototype.consumer = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    assert(<span class="hljs-keyword">this</span>.type == <span class="hljs-string">'entry'</span>, <span class="hljs-string">'not an entry node'</span>)
    assert(<span class="hljs-keyword">this</span>.body != <span class="hljs-literal">null</span>, <span class="hljs-string">'node expired'</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-keyword">this</span>._procession._Consumer(<span class="hljs-keyword">this</span>._procession, <span class="hljs-keyword">this</span>)
}

</pre></div></div>

        </li>


        <li id="section-10">
            <div class="annotation">

              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Export as constructor function.</p>

            </div>

            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">module</span>.exports = Node

</pre></div></div>

        </li>

    </ul>
  </div>
</body>
</html>
